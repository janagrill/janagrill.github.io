<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"/><meta name="og:site_name" content="Jana Grill"/><link rel="canonical" href="https://janagrill.io/articles/404-publish-github-pages"/><meta name="twitter:url" content="https://janagrill.io/articles/404-publish-github-pages"/><meta name="og:url" content="https://janagrill.io/articles/404-publish-github-pages"/><title>404 page with Publish and GitHub Pages | Jana Grill</title><meta name="twitter:title" content="404 page with Publish and GitHub Pages | Jana Grill"/><meta name="og:title" content="404 page with Publish and GitHub Pages | Jana Grill"/><meta name="description" content="How to create a custom 404 page for your GitHub Pages website using John Sundell's Publish tool"/><meta name="twitter:description" content="How to create a custom 404 page for your GitHub Pages website using John Sundell's Publish tool"/><meta name="og:description" content="How to create a custom 404 page for your GitHub Pages website using John Sundell's Publish tool"/><meta name="twitter:card" content="summary"/><link rel="stylesheet" href="/styles.css" type="text/css"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="/images/favicon.png" type="image/png"/><link rel="alternate" href="/feed.rss" type="application/rss+xml" title="Subscribe to Jana Grill"/><meta name="twitter:image" content="https://janagrill.io/images/belgrade.jpeg"/><meta name="og:image" content="https://janagrill.io/images/belgrade.jpeg"/></head><body class="item-page"><header><div class="navigation"><a class="navigation__title" href="/">Jana Grill</a></div></header><div class="wrapper"><article><div class="content"><div class="article-header"><div class="article-header-element">24 Dec 2020</div><div class="article-header-element">3 min read</div></div><h1>404 page with Publish and GitHub Pages</h1><p>I have been meaning to try out <a href="https://twitter.com/johnsundell">John Sundell's</a> static site generator <a href="https://github.com/johnsundell/publish">Publish</a> for a while now and since holidays during coronavirus pandemic meant more free time than usual I decided to do it. For a Swift enthusiast as myself the tool was a joy to use and I ended up redoing the whole website using it. While most of the things I wanted to do were simple, it took me a bit of research and trial-and-error to figure out how to create my own 404 page.</p><p>My website is hosted on <a href="https://pages.github.com">GitHub Pages</a> and ultimately it is your hosting solution that prescribes how you should implement your 404 page. GitHub Pages offers a nice <a href="https://docs.github.com/en/free-pro-team@latest/github/working-with-github-pages/creating-a-custom-404-page-for-your-github-pages-site">documentation page</a> saying you should either have a 404.html or a 404.md page.</p><h2>First attempt - add 404.md</h2><p>I first tried simply adding a 404.md page under the Content folder to see what happens. After running <code>publish generate</code>, a new page <code>index.html</code> was generated in <code>Output/404</code>. This is, however, not what GitHub Pages expects. Accessing <code>your.website/404</code> does indeed show the custom page, however navigating to any other unsupported URL doesn't.</p><p>Another downside of this approach is that this way the 404 page gets added to your <code>sitemap.xml</code>, meaning search engines can use it to index your website, and it could turn up in the search, which is also not what you want for your 404 page.</p><p>I decided to try alternatives.</p><h2>Second attempt - copy generated 404 HTML</h2><p>My second idea was to add a custom step to publishing the website which will copy the generated 404 page to the output and name it as GitHub Pages expects.</p><pre><code><span class="keyword">try</span> <span class="type">Website</span>().<span class="call">publish</span>(
    ...
    additionalSteps: [
        ...
        .<span class="call">step</span>(named: <span class="string">"Copy 404 page"</span>) { context <span class="keyword">in
            try</span> context.<span class="call">copyFileToOutput</span>(from: <span class="string">"Output/404/index.html"</span>, 
                                         to: <span class="string">"Output/404.html"</span>)
        }
        ...
    ]
)
</code></pre><p>This approach also has two flaws. The first one is that it simply does not work, since at the time when this step is executed, the 404 page still hasn't been generated inside the <code>Output</code> folder.</p><p>This could probably be solved by listing all the publish steps manually and executing the copy step as the very last one, but the other flaw remains, namely the 404 page is still listed in <code>sitemap.xml</code>.</p><p>Therefore I quickly abandoned this approach as well.</p><h2>Third attempt - 404.html in Resources</h2><p>My final solution turned out to be really simple. I copied the HTML page generated by my first attempt, renamed it to <code>404.html</code> and moved it to the <code>Resources</code> folder. Everything that is in the <code>Resources</code> folder gets automatically copied to the <code>Output</code> folder on website generation. The advantage here is that my 404 page is no longer listed in <code>sitemap.xml</code> and, well, the obvious advantage is that this actually works for GitHub Pages ðŸ˜„.</p><p>One downside is that my 404 page is pretty much hardcoded now and in order to change it I have to dig into the HTML and manually change that. This, however, does not pose a big issue as the page itself is actually pretty small and I do not expect to be changing this page that often anyways so this is what I ended up with.</p></div><div class="content"><h3>I hope you enjoyed this article</h3><span>If you notice any mistakes or issues in this article, please let me know at </span><a href="mailto:dev@janagrill.io">dev@janagrill.io</a><span>.</span></div><span>Tagged with: </span><ul class="tag-list"><li><a href="/tags/publish">publish</a></li><li><a href="/tags/githubpages">github-pages</a></li></ul></article></div><footer><div class="footer__copyright">Copyright Â© Jana Grill 2020</div><div class="footer__links"><a class="footer__link" href="/privacy-policy">Privacy policy</a><a class="footer__link" href="/imprint">Imprint</a><a class="footer__link" href="/about">About</a></div></footer></body></html>